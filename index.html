<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hamster Clicker TG ULTIMATE</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(180deg, #f5b971, #f08a5d);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      gap: 10px;
      user-select: none;
    }
    .panel { background: rgba(0,0,0,0.25); padding: 12px; border-radius: 14px; width: 92%; max-width: 420px; }
    .row { display: flex; justify-content: space-between; margin: 6px 0; }
    .hamster { width: 180px; height: 180px; border-radius: 50%; background: url('https://i.imgur.com/8QfQY4F.png') center/cover no-repeat; box-shadow: 0 10px 30px rgba(0,0,0,0.3); transition: transform .1s; }
    .hamster:active { transform: scale(0.95); }
    button { width: 100%; padding: 10px; margin-top: 6px; border-radius: 10px; border: none; background:#6a2c70; color:#fff; font-size:14px; }
    button:disabled { opacity:0.5 }
    small { opacity:0.8 }
  </style>
</head>
<body>

<div class="panel">
  <div class="row">üí∞ –û—á–∫–∏: <span id="score">0</span></div>
  <div class="row">üîã –≠–Ω–µ—Ä–≥–∏—è: <span id="energy">0</span>/<span id="maxEnergy">0</span></div>
  <div class="row">‚è± –î–æ—Ö–æ–¥/—Å–µ–∫: <span id="income">0</span></div>
</div>

<div class="hamster" id="hamster"></div>

<div class="panel">
  <strong>üèó –ê–ø–≥—Ä–µ–π–¥—ã</strong>
  <button onclick="upgradeClick()">üëÜ –ö–ª–∏–∫ +1 (100)</button>
  <button onclick="upgradeIncome()">‚è± –î–æ—Ö–æ–¥ +1 (150)</button>
  <button onclick="upgradeEnergy()">üîã –ú–∞–∫—Å —ç–Ω–µ—Ä–≥–∏—è +5 (120)</button>
</div>

<div class="panel">
  <strong>üèÜ –¢–æ–ø</strong>
  <div id="leaderboard"></div>
  <small>–ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞)</small>
</div>

<script>
const tg = window.Telegram.WebApp; tg.expand();

// ===== STATE =====
let state = JSON.parse(localStorage.getItem('hamsterUltimate')) || {
  score: 0,
  clickPower: 1,
  income: 0,
  energy: 10,
  maxEnergy: 10,
  lastOnline: Date.now()
};

let { score, clickPower, income, energy, maxEnergy, lastOnline } = state;

// ===== OFFLINE INCOME =====
let now = Date.now();
let offlineSeconds = Math.floor((now - lastOnline) / 1000);
if (offlineSeconds > 0 && income > 0) {
  score += offlineSeconds * income;
}
lastOnline = now;

// ===== UI =====
const scoreEl = document.getElementById('score');
const energyEl = document.getElementById('energy');
const maxEnergyEl = document.getElementById('maxEnergy');
const incomeEl = document.getElementById('income');
const hamster = document.getElementById('hamster');
const leaderboardEl = document.getElementById('leaderboard');

function updateUI(){
  scoreEl.textContent = Math.floor(score);
  energyEl.textContent = Math.floor(energy);
  maxEnergyEl.textContent = maxEnergy;
  incomeEl.textContent = income;
  updateLeaderboard();
}

function save(){
  localStorage.setItem('hamsterUltimate', JSON.stringify({score, clickPower, income, energy, maxEnergy, lastOnline}));
  updateUI();
}

// ===== CLICK =====
hamster.onclick = () => {
  if (energy < 1) return;
  score += clickPower;
  energy -= 1;
  tg.HapticFeedback.impactOccurred('light');
  save();
}

// ===== UPGRADES =====
function upgradeClick(){ if(score>=100){ score-=100; clickPower++; save(); }}
function upgradeIncome(){ if(score>=150){ score-=150; income++; save(); }}
function upgradeEnergy(){ if(score>=120){ score-=120; maxEnergy+=5; energy+=5; save(); }}

// ===== PASSIVE =====
setInterval(()=>{ score+=income; save(); },1000);

// ===== ENERGY REGEN =====
setInterval(()=>{ if(energy<maxEnergy){ energy+=0.5; save(); } },1000);

// ===== LEADERBOARD =====
function updateLeaderboard(){
  let top = JSON.parse(localStorage.getItem('hamsterTop')) || [];
  if(!top.includes(Math.floor(score))){
    top.push(Math.floor(score));
    top = top.sort((a,b)=>b-a).slice(0,5);
    localStorage.setItem('hamsterTop', JSON.stringify(top));
  }
  leaderboardEl.innerHTML = top.map((s,i)=>`#${i+1} ‚Äî ${s}`).join('<br>');
}

updateUI(); save();
</script>
</body>
</html>










































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































