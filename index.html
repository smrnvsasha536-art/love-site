<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–°–∏–º—É–ª—è—Ç–æ—Ä –∑–≤–æ–Ω–∫–∞ ‚Äî –†–æ—Å—Ç–µ–ª–µ–∫–æ–º</title>

<style>
body { margin: 0; font-family: Arial, sans-serif; background: linear-gradient(135deg, #1e3c72, #2a5298); color: #fff; }
.container { max-width: 1000px; margin: auto; padding: 20px; }
h1 { text-align: center; }
.dialog { background: rgba(0,0,0,0.45); padding: 20px; border-radius: 12px; min-height: 160px; margin-bottom: 15px; }
input { width: 100%; padding: 14px; font-size: 16px; border-radius: 8px; border: none; margin-top: 10px; }
button { margin-top: 12px; padding: 12px 22px; font-size: 16px; border-radius: 10px; border: none; cursor: pointer; background: #ff9800; color: #000; }
button:hover { background: #ffc107; }
.result { margin-top: 30px; background: rgba(0,0,0,0.6); padding: 20px; border-radius: 12px; }
.good { color: #4caf50; }
.bad { color: #ff5252; }
.example { color: #ffd54f; font-style: italic; }
.voice-btn { background: #4caf50; margin-left: 10px; }
</style>
</head>

<body>
<div class="container">
<h1>–°–∏–º—É–ª—è—Ü–∏—è –∑–≤–æ–Ω–∫–∞ –†–æ—Å—Ç–µ–ª–µ–∫–æ–º</h1>

<div id="dialog" class="dialog"></div>

<input id="answer" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞">
<button id="send">–î–∞–ª–µ–µ</button>
<button id="voice" class="voice-btn">üé§ –ì–æ–ª–æ—Å</button>

<div id="result" class="result" style="display:none;"></div>
</div>

<script>
// === –°—Ü–µ–Ω–∞—Ä–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞ ===
const steps = [
  { text: "–ö–ª–∏–µ–Ω—Ç: –ê–ª–ª–æ?", keywords: ["—Ä–æ—Å—Ç–µ–ª–µ–∫–æ–º","–æ–ø–µ—Ä–∞—Ç–æ—Ä"], points:5, rule:"–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ", example:"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –í–∞—Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ –†–æ—Å—Ç–µ–ª–µ–∫–æ–º, –º–µ–Ω—è –∑–æ–≤—É—Ç –ò–≤–∞–Ω." },
  { text: "–ö–ª–∏–µ–Ω—Ç: –ê –∫—Ç–æ –≤—ã –≤–æ–æ–±—â–µ?", keywords:["—Ä–æ—Å—Ç–µ–ª–µ–∫–æ–º"], points:5, rule:"–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å—Å—è –∏ –Ω–∞–∑–≤–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏—é", example:"–ú–µ–Ω—è –∑–æ–≤—É—Ç –ò–≤–∞–Ω, —è –æ–ø–µ—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ –†–æ—Å—Ç–µ–ª–µ–∫–æ–º, –æ—Ç–¥–µ–ª –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏." },
  { text: "–ö–ª–∏–µ–Ω—Ç: –ú–Ω–µ —Å–µ–π—á–∞—Å –Ω–µ —É–¥–æ–±–Ω–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å", keywords:["–º–Ω–æ–≥–æ","–≤–∞–∂–Ω–æ"], points:5, rule:"–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞", example:"–†–∞–∑–≥–æ–≤–æ—Ä –Ω–µ –∑–∞–π–º—ë—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –≤–∞–º –≤–∞–∂–Ω–æ —É–¥–µ–ª–∏—Ç—å 5 –º–∏–Ω—É—Ç —Å–≤–æ–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏." },
  { text: "–ö–ª–∏–µ–Ω—Ç: –í —Å–º—ã—Å–ª–µ? –ó–∞—á–µ–º –≤—ã –∑–≤–æ–Ω–∏—Ç–µ?", keywords:["–¥–æ–≥–æ–≤–æ—Ä","–¥–æ–≥–æ–≤–æ—Ä–∞","—Å—Ä–æ–∫","—Å—Ä–æ–∫–∞","—Å—Ä–æ–∫—É","—Å—Ä–æ–∫–æ–º","—Å—Ä–æ–∫–µ"], points:5, rule:"–û–±—ä—è—Å–Ω–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É –∑–≤–æ–Ω–∫–∞", example:"–£ –≤–∞—Å –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞, –µ—Å–ª–∏ –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º, –¥–∞–ª–µ–µ –µ–≥–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–¥–ª–∏—Ç—å." },
  { text: "–ö–ª–∏–µ–Ω—Ç: –û—Ç–∫—É–¥–∞ —É –≤–∞—Å –º–æ–π –Ω–æ–º–µ—Ä?", keywords:["–∫–ª–∏–µ–Ω—Ç","–∫–ª–∏–µ–Ω—Ç–∞","–∫–ª–∏–µ–Ω—Ç—É","–∫–ª–∏–µ–Ω—Ç–æ–º","–∫–ª–∏–µ–Ω—Ç–µ"], points:5, rule:"–û–±—ä—è—Å–Ω–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö", example:"–í–∞—à –Ω–æ–º–µ—Ä —É–∫–∞–∑–∞–Ω –≤ –≤–∞—à–µ–º –¥–æ–≥–æ–≤–æ—Ä–µ, —Ç–∞–∫ –∫–∞–∫ –≤—ã —è–≤–ª—è–µ—Ç–µ—Å—å –Ω–∞—à–∏–º –∫–ª–∏–µ–Ω—Ç–æ–º, –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è." },
  { text: "–í–æ–∑—Ä–∞–∂–µ–Ω–∏–µ: –Ø –Ω–∏—á–µ–≥–æ –ø–µ—Ä–µ–æ—Ñ–æ—Ä–º–ª—è—Ç—å –Ω–µ —Ö–æ—á—É", keywords:["–æ—Ç–∫–ª—é—á","–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ","–æ—Ç–∫–ª—é—á–µ–Ω–∏—è","–æ—Ç–∫–ª—é—á–µ–Ω–∏—é","–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º","–ª–∏–Ω–∏—è","–ª–∏–Ω–∏–∏","–ª–∏–Ω–µ","–ª–∏–Ω—É","–ª–∏–Ω–µ—é"], points:10, rule:"–ù—É–∂–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –æ—Ç–∫–∞–∑–∞", example:"–ï—Å–ª–∏ –º—ã –Ω–µ —Ä–µ—à–∏–º –≤–æ–ø—Ä–æ—Å —Å–µ–π—á–∞—Å, –ª–∏–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∞, –∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –ø—Ä–∏–¥—ë—Ç—Å—è –æ–ø–ª–∞—Ç–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ." },
  { text: "–í–æ–∑—Ä–∞–∂–µ–Ω–∏–µ: –Ø –Ω–µ –±—É–¥—É –≥–æ–≤–æ—Ä–∏—Ç—å —ç—Ç—É —Ñ—Ä–∞–∑—É", keywords:["–Ω–µ —Å–º–æ–≥—É","–ø—Ä–æ–¥–ª–∏—Ç—å","–ø—Ä–æ–¥–ª–µ–Ω–∏—è","–ø—Ä–æ–¥–ª–µ–Ω–∏—é","–ø—Ä–æ–¥–ª–µ–Ω–∏–µ–º"], points:10, rule:"–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –≤–æ–∑—Ä–∞–∂–µ–Ω–∏–µ–º", example:"–í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ —è –Ω–µ —Å–º–æ–≥—É –ø—Ä–æ–¥–ª–∏—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞, —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ç –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã." },
  { text: "–í–æ–∑—Ä–∞–∂–µ–Ω–∏–µ: –ö–∞–∫ —è –º–æ–≥—É —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä?", keywords:["sms","—Å–æ–æ–±—â–µ–Ω–∏–µ","—Å–æ–æ–±—â–µ–Ω–∏—è","—Å–æ–æ–±—â–µ–Ω–∏—é"], points:10, rule:"–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ SMS", example:"–Ø –º–æ–≥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∞–º SMS —Å –Ω–æ–º–µ—Ä–æ–º –≤–∞—à–µ–π –∑–∞—è–≤–∫–∏. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ SMS –Ω–∏ —Å –∫–µ–º –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∏—Ç—å—Å—è." },
  { text: "–í–æ–∑—Ä–∞–∂–µ–Ω–∏–µ: –ú–Ω–µ –¥–µ—Ç–∏ –ø–æ—Ç–æ–º –ø–æ–º–æ–≥—É—Ç", keywords:["–Ω–µ–ª—å–∑—è","–ø–µ—Ä–µ–Ω–µ—Å—Ç–∏","–ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å","–±–ª–æ–∫–∏—Ä–æ–≤","–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞","–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏"], points:10, rule:"–û–±—ä—è—Å–Ω–∏—Ç—å, –ø–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –æ—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å", example:"–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—É –Ω–µ–ª—å–∑—è. –ï—Å–ª–∏ –Ω–µ –æ—Ñ–æ—Ä–º–∏—Ç—å —Å–µ–π—á–∞—Å, –≤–æ–∑–º–æ–∂–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ª–∏–Ω–∏–∏." },
  { text: "–í–æ–∑—Ä–∞–∂–µ–Ω–∏–µ: –Ø –±–æ—é—Å—å –¥–∞–≤–∞—Ç—å –ø–∞—Å–ø–æ—Ä—Ç", keywords:["—á–∞—Å—Ç—å","—á–∞—Å—Ç–∏","—á–∞—Å—Ç—å—é","–ø—É–±–ª–∏—á–Ω–∞—è","–ø—É–±–ª–∏—á–Ω–æ–π","–ø—É–±–ª–∏—á–Ω–æ–π —á–∞—Å—Ç–∏"], points:10, rule:"–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–∞—Ö–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤", example:"–ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω–∞—è —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤–∞—à–∏ —Å–≤–µ–¥–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ." },
  { text: "–ö–ª–∏–µ–Ω—Ç: –ß—Ç–æ –æ—Ç –º–µ–Ω—è —Å–µ–π—á–∞—Å —Ç—Ä–µ–±—É–µ—Ç—Å—è?", keywords:["–ø–æ–¥—Ç–≤–µ—Ä–¥","–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ","–ø–∞—Å–ø–æ—Ä—Ç","–ø–∞—Å–ø–æ—Ä—Ç–∞","–ø–∞—Å–ø–æ—Ä—Ç—É","–ø–∞—Å–ø–æ—Ä—Ç–æ–º","–ø–∞—Å–ø–æ—Ä—Ç–µ"], points:5, rule:"–ß—ë—Ç–∫–æ –æ–±—ä—è—Å–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥", example:"–ù—É–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ ‚Äî —Å–µ—Ä–∏—è –∏ –Ω–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞, —á—Ç–æ–±—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ." },
  { text: "–ö–ª–∏–µ–Ω—Ç: –≠—Ç–æ –≤—Å—ë?", keywords:["–¥–∞","–≤—Å—ë","–≤—Å–µ–≥–æ"], points:5, rule:"–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞", example:"–î–∞, —ç—Ç–æ –≤—Å—ë. –ë–æ–ª—å—à–µ –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –°–ø–∞—Å–∏–±–æ –∑–∞ –æ–±—Ä–∞—â–µ–Ω–∏–µ, —Ö–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è." }
];

let step=0, history=[], score=0;
const dialog=document.getElementById("dialog");
const input=document.getElementById("answer");
const send=document.getElementById("send");
const result=document.getElementById("result");
const voiceBtn=document.getElementById("voice");

showStep();

function showStep() {
  if(step>=steps.length){analyzeDialog();return;}
  dialog.innerHTML=`<b>${steps[step].text}</b>`;
  input.value="";
  input.focus();
}

send.onclick=()=>{
  const text=input.value.trim(); if(!text) return;
  history.push({question:steps[step].text, answer:text, stepData:steps[step]});
  step++; showStep();
}

// === –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ ===
let recognition;
if('webkitSpeechRecognition' in window){
  recognition = new webkitSpeechRecognition();
  recognition.lang='ru-RU';
  recognition.interimResults=false;
  recognition.maxAlternatives=1;

  voiceBtn.onclick=()=> recognition.start();

  recognition.onresult=(event)=>{
    const transcript=event.results[0][0].transcript;
    input.value=transcript;
  }

  recognition.onerror=(event)=> alert('–û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è: ' + event.error);
}else{
  voiceBtn.disabled=true;
  voiceBtn.textContent='üé§ –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è';
}

// === –†–∞–∑–±–æ—Ä –¥–∏–∞–ª–æ–≥–∞ –ø–æ —Å—É—Ç–∏ ===
function analyzeDialog(){
  dialog.style.display="none";
  input.style.display="none";
  send.style.display="none";
  voiceBtn.style.display="none";

  let html=`<h2>–ò—Ç–æ–≥–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ –∏ –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä</h2><hr>`;

  history.forEach(h=>{
    const answerWords=h.answer.toLowerCase().match(/\w+/g)||[];
    const exampleWords=h.stepData.example.toLowerCase().match(/\w+/g)||[];

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Å—É—Ç–∏: —Å–∫–æ–ª—å–∫–æ —Å–ª–æ–≤ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ
    let matchedCount=exampleWords.filter(w=>answerWords.includes(w)).length;
    const success=matchedCount>=Math.ceil(exampleWords.length*0.6);

    if(success) score+=h.stepData.points;

    html+=`
      <p><b>${h.question}</b></p>
      <p class="${success?'good':'bad'}">
      ${h.answer}<br>
      <i>${success
        ? '‚úî –í–µ—Ä–Ω–æ. –°—É—Ç—å –¥–æ–Ω–µ—Å–µ–Ω–∞.'
        : `‚úñ –û—à–∏–±–∫–∞: ${h.stepData.rule}<br>
           <b>–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:</b> <span class="example">${h.stepData.example}</span>`}
      </i>
      </p><hr>`;
  });

  html=`<h2>–û–±—â–∏–π –±–∞–ª–ª: ${score}</h2>`+html;
  result.innerHTML=html;
  result.style.display="block";
}
</script>
</body>
</html>


































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































