<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Симулятор звонка — Ростелеком</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #1e3c72, #2a5298);
    color: #fff;
}

.container {
    max-width: 1000px;
    margin: auto;
    padding: 20px;
}

h1 {
    text-align: center;
}

.dialog {
    background: rgba(0,0,0,0.45);
    padding: 20px;
    border-radius: 12px;
    min-height: 160px;
    margin-bottom: 15px;
}

input {
    width: 100%;
    padding: 14px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    margin-top: 10px;
}

button {
    margin-top: 12px;
    padding: 12px 22px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: #ff9800;
    color: #000;
}

button:hover {
    background: #ffc107;
}

.result {
    margin-top: 30px;
    background: rgba(0,0,0,0.6);
    padding: 20px;
    border-radius: 12px;
}

.good {
    color: #4caf50;
}

.bad {
    color: #ff5252;
}
</style>
</head>

<body>
<div class="container">
<h1>Симуляция звонка Ростелеком</h1>

<div id="dialog" class="dialog"></div>

<input id="answer" placeholder="Введите ответ оператора">
<button id="send">Далее</button>

<div id="result" class="result" style="display:none;"></div>
</div>

<script>
// Сценарий
const steps = [
{
    text: "Клиент: Алло?",
    keywords: ["здравствуйте", "ростелеком", "оператор"],
    points: 5,
    rule: "Корректное приветствие и представление"
},
{
    text: "Клиент: В смысле? Зачем вы звоните?",
    keywords: ["договор", "срок", "обслуживание"],
    points: 5,
    rule: "Объяснить причину звонка"
},
{
    text: "Возражение: Я ничего переоформлять не хочу",
    keywords: ["если", "не", "решим", "отключ", "линия"],
    points: 10,
    rule: "Нужно объяснить последствия отказа"
},
{
    text: "Возражение: Как я могу убедиться, что вы оператор?",
    keywords: ["sms", "номер", "заявки"],
    points: 10,
    rule: "Подтверждение через SMS"
},
{
    text: "Возражение: Мне дети потом помогут",
    keywords: ["нельзя", "перенести", "блокиров"],
    points: 10,
    rule: "Объяснить, почему нельзя откладывать"
},
{
    text: "Возражение: Я боюсь давать паспорт",
    keywords: ["публич", "часть", "удостовер"],
    points: 10,
    rule: "Корректная работа со страхом документов"
}
];

let step = 0;
let history = [];
let score = 0;

const dialog = document.getElementById("dialog");
const input = document.getElementById("answer");
const send = document.getElementById("send");
const result = document.getElementById("result");

showStep();

function showStep() {
    if (step >= steps.length) {
        analyzeDialog();
        return;
    }
    dialog.innerHTML = `<b>${steps[step].text}</b>`;
    input.value = "";
    input.focus();
}

send.onclick = () => {
    const text = input.value.trim();
    if (!text) return;

    history.push({
        question: steps[step].text,
        answer: text,
        stepData: steps[step]
    });

    step++;
    showStep();
};

function analyzeDialog() {
    dialog.style.display = "none";
    input.style.display = "none";
    send.style.display = "none";

    let html = `<h2>Итоговый диалог и разбор</h2><hr>`;

    history.forEach(h => {
        const answerLower = h.answer.toLowerCase();
        const matched = h.stepData.keywords.filter(k => answerLower.includes(k));
        const success = matched.length >= Math.ceil(h.stepData.keywords.length * 0.6);

        if (success) score += h.stepData.points;

        html += `
        <p><b>${h.question}</b></p>
        <p class="${success ? 'good' : 'bad'}">
            ${h.answer}
            <br>
            <i>${success ? '✔ Верно' : '✖ Ошибка: ' + h.stepData.rule}</i>
        </p>
        <hr>
        `;
    });

    html = `<h2>Общий балл: ${score}</h2>` + html;
    result.innerHTML = html;
    result.style.display = "block";
}
</script>
</body>
</html>













































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































