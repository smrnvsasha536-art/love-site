<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hamster Clicker Ultimate</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body{margin:0;font-family:Arial;background:linear-gradient(180deg,#f5b971,#f08a5d);color:#fff;display:flex;flex-direction:column;align-items:center;gap:10px;height:100vh;user-select:none}
.panel{background:rgba(0,0,0,.25);padding:12px;border-radius:14px;width:94%;max-width:420px}
.row{display:flex;justify-content:space-between;margin:6px 0}
.hamster{width:180px;height:180px;border-radius:50%;background:url('https://i.imgur.com/8QfQY4F.png') center/cover no-repeat;box-shadow:0 10px 30px rgba(0,0,0,.3);transition:.1s}
.hamster:active{transform:scale(.94)}
button{width:100%;padding:10px;margin-top:6px;border-radius:10px;border:none;background:#6a2c70;color:#fff;font-size:14px}
button:disabled{opacity:.5}
small{opacity:.8}
</style>
</head>
<body>

<div class="panel">
<div class="row">üí∞ –û—á–∫–∏: <span id="score">0</span></div>
<div class="row">üîã –≠–Ω–µ—Ä–≥–∏—è: <span id="energy">0</span>/<span id="maxEnergy">0</span></div>
<div class="row">‚è± –î–æ—Ö–æ–¥/—Å–µ–∫: <span id="income">0</span></div>
<div class="row">üåü –ü—Ä–µ—Å—Ç–∏–∂: <span id="prestige">0</span></div>
</div>

<div class="hamster" id="hamster"></div>

<div class="panel">
<strong>üèó –ê–ø–≥—Ä–µ–π–¥—ã</strong>
<button onclick="up('click')">üëÜ –°–∏–ª–∞ –∫–ª–∏–∫–∞</button>
<button onclick="up('income')">‚è± –î–æ—Ö–æ–¥</button>
<button onclick="up('energy')">üîã –≠–Ω–µ—Ä–≥–∏—è</button>
<button onclick="up('regen')">‚ôªÔ∏è –†–µ–≥–µ–Ω</button>
<button onclick="up('crit')">üí• –ö—Ä–∏—Ç</button>
<button onclick="up('offline')">üïí –û—Ñ—Ñ–ª–∞–π–Ω</button>
</div>

<div class="panel">
<strong>üéØ –ú–∏—Å—Å–∏–∏</strong>
<div id="missions"></div>
</div>

<div class="panel">
<strong>üèÜ –¢–æ–ø</strong>
<div id="leaderboard"></div>
<small>–ª–æ–∫–∞–ª—å–Ω—ã–π</small>
</div>

<div class="panel">
<button onclick="prestigeReset()">üåü –ü—Ä–µ—Å—Ç–∏–∂ (—Å–±—Ä–æ—Å + –±–æ–Ω—É—Å)</button>
</div>

<div class="panel">
<strong>üåç –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∏–≤–µ–Ω—Ç</strong>
<div id="eventInfo">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≤–µ–Ω—Ç–æ–≤</div>
</div>

<script>
const tg=window.Telegram.WebApp; tg.expand();

let state=JSON.parse(localStorage.getItem('hamsterMax'))||{
score:0,click:1,income:0,energy:10,maxEnergy:10,regen:.5,crit:0,offline:1,prestige:0,last:Date.now(),missions:{clicks:0}
};
let s=state;

// OFFLINE INCOME
let now=Date.now();
let off=Math.floor((now-s.last)/1000);
if(off>0)s.score+=off*s.income*s.offline;
s.last=now;

const scoreEl=document.getElementById('score');
const energyEl=document.getElementById('energy');
const maxEnergyEl=document.getElementById('maxEnergy');
const incomeEl=document.getElementById('income');
const prestigeEl=document.getElementById('prestige');
const hamster=document.getElementById('hamster');
const missionsDiv=document.getElementById('missions');
const leaderboard=document.getElementById('leaderboard');
const eventInfo=document.getElementById('eventInfo');

const prices={click:100,income:150,energy:120,regen:200,crit:250,offline:300};
const EVENTS={doubleIncome:{name:'üí∞ –î–≤–æ–π–Ω–æ–π –¥–æ—Ö–æ–¥',desc:'–í–µ—Å—å –¥–æ—Ö–æ–¥ x2',incomeMultiplier:2},freeEnergy:{name:'üîã –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∫–ª–∏–∫–∏',desc:'–ö–ª–∏–∫–∏ –Ω–µ —Ç—Ä–∞—Ç—è—Ç —ç–Ω–µ—Ä–≥–∏—é',freeEnergy:true},critFest:{name:'üí• –ö—Ä–∏—Ç-—Ñ–µ—Å—Ç',desc:'+50% –∫ –∫—Ä–∏—Ç—É',critBonus:.5}};
let activeEvent=JSON.parse(localStorage.getItem('activeEvent'))||null;

function save(){localStorage.setItem('hamsterMax',JSON.stringify(s));}

function ui(){
scoreEl.textContent=Math.floor(s.score);
energyEl.textContent=Math.floor(s.energy);
maxEnergyEl.textContent=s.maxEnergy;
incomeEl.textContent=s.income;
prestigeEl.textContent=s.prestige;
missionsUI();
topUI();
renderEvent(); save();
}

hamster.onclick=()=>{
if(!isFreeEnergy()&&s.energy<1)return;
let gain=s.click*(1+s.prestige*.1);
if(Math.random()<s.crit+getCritBonus())gain*=2;
s.score+=gain;
if(!isFreeEnergy())s.energy--;
s.missions.clicks++;
tg.HapticFeedback.impactOccurred('light');
ui();
}

function up(t){
if(s.score<prices[t])return;s.score-=prices[t];
if(t==='click')s.click++;
if(t==='income')s.income++;
if(t==='energy'){s.maxEnergy+=5;s.energy+=5;}
if(t==='regen')s.regen+=.2;
if(t==='crit'&&s.crit<.5)s.crit+=.05;
if(t==='offline')s.offline*=1.5;
ui();
}

function missionsUI(){
missionsDiv.innerHTML=`–°–¥–µ–ª–∞–π 100 –∫–ª–∏–∫–æ–≤: ${s.missions.clicks}/100 ${s.missions.clicks>=100?'‚úÖ +500':''}`;
if(s.missions.clicks===100){s.score+=500;}
}

function prestigeReset(){
if(s.score<10000)return;
s.prestige++;
Object.assign(s,{score:0,click:1,income:0,energy:10,maxEnergy:10,regen:.5,crit:0,offline:1,missions:{clicks:0}});
ui();
}

function topUI(){
let t=JSON.parse(localStorage.getItem('hamTop'))||[];
if(!t.includes(Math.floor(s.score)))t.push(Math.floor(s.score));
t=t.sort((a,b)=>b-a).slice(0,5);
localStorage.setItem('hamTop',JSON.stringify(t));
leaderboard.innerHTML=t.map((v,i)=>`#${i+1} ‚Äî ${v}`).join('<br>');
}

// EVENTS
function startEvent(key,duration=600){activeEvent={key,ends:Date.now()+duration*1000};localStorage.setItem('activeEvent',JSON.stringify(activeEvent)); renderEvent();}
function stopEvent(){activeEvent=null; localStorage.removeItem('activeEvent'); renderEvent();}
function renderEvent(){
if(!activeEvent){eventInfo.textContent='–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≤–µ–Ω—Ç–æ–≤'; return;}
const ev=EVENTS[activeEvent.key];
const left=Math.max(0,Math.floor((activeEvent.ends-Date.now())/1000));
eventInfo.innerHTML=`${ev.name}<br>${ev.desc}<br>‚è≥ ${left} —Å–µ–∫.`;
if(left<=0)stopEvent();
}
function getIncomeMultiplier(){return activeEvent?.key==='doubleIncome'?2:1;}
function isFreeEnergy(){return activeEvent?.key==='freeEnergy';}
function getCritBonus(){return activeEvent?.key==='critFest'?0.5:0;}

setInterval(()=>{s.score+=s.income*getIncomeMultiplier()*(1+s.prestige*.1); ui();},1000);
setInterval(()=>{if(s.energy<s.maxEnergy){s.energy+=s.regen; ui();}},1000);
setInterval(renderEvent,1000);
if(!activeEvent)startEvent('doubleIncome',300);

ui();

// REFERRAL SYSTEM
// –ø—Ä–∏–º–µ—Ä frontend
// fetch('/referral/join',{method:'POST',body: JSON.stringify({tg_id, referrer_id})})
</script>

</body>
</html>












































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































