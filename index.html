<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üé∞ Slot 5x3 Hard RTP</title>
<style>
:root{
  --bg: radial-gradient(circle,#111,#000);
  --slot-bg: linear-gradient(145deg,#555,#222);
  --btn-bg: linear-gradient(145deg,#e74c3c,#c0392b);
  --line-color: gold;
}
body{
  margin:0;
  background:var(--bg);
  font-family:Arial,sans-serif;
  color:#fff;
  text-align:center;
}
.container{max-width:520px;margin:auto;padding:10px;position:relative}
.slots{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  grid-template-rows:repeat(3,90px);
  gap:8px;
  margin:15px 0;
  padding:10px;
  background:rgba(0,0,0,.6);
  border-radius:16px;
  position:relative;
}
.slot{
  background:var(--slot-bg);
  border-radius:16px;
  font-size:36px;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:inset 0 0 10px #000;
  z-index:2;
  transition: transform .3s, filter .3s;
}
.slot.spin{animation:spin .4s linear infinite}
@keyframes spin{0%{transform:translateY(-80%)}100%{transform:translateY(80%)}}
.slot.win{animation:winPulse .8s infinite alternate;}
@keyframes winPulse{0%{transform:scale(1);filter:drop-shadow(0 0 0 gold)}100%{transform:scale(1.25);filter:drop-shadow(0 0 15px gold)}}
.line{
  position:absolute;
  height:6px;
  background:var(--line-color);
  border-radius:4px;
  z-index:1;
  opacity:.6;
  animation:lineFlash .6s infinite alternate;
}
@keyframes lineFlash{from{opacity:.4}to{opacity:1}}
.bigWin{
  position:absolute;
  left:50%; top:30%;
  transform:translate(-50%,0);
  font-size:48px; font-weight:bold;
  color: gold;
  text-shadow:0 0 10px #fff,0 0 20px gold;
  animation:bigWinAnim 1s ease-out forwards;
  pointer-events:none;
  z-index:999;
}
@keyframes bigWinAnim{0%{transform:translate(-50%,0) scale(.5);opacity:0;}50%{transform:translate(-50%,-20px) scale(1.5);opacity:1;}100%{transform:translate(-50%,0) scale(1);opacity:1;}}
button{
  padding:10px 18px;
  border:none;
  border-radius:14px;
  background:var(--btn-bg);
  color:#fff;
  font-size:14px;
  cursor:pointer;
  margin:3px;
}
.history{font-size:12px;opacity:.7;margin-top:6px;}
.controls{margin:6px 0}
</style>
</head>
<body>
<div class="container">
<h2>üé∞ Slot 5x3 Hard RTP</h2>
<div>–ë–∞–ª–∞–Ω—Å: <b id="balance">50000</b> | FS: <b id="fs">0</b></div>

<div>
–°—Ç–∞–≤–∫–∞ <input type="number" id="bet" value="10" min="1">
–õ–∏–Ω–∏–∏
<select id="lines">
<option>1</option><option>2</option><option>3</option>
<option>4</option><option>5</option>
</select>
</div>

<div class="controls">
<b>–¢–µ–º—ã:</b>
<button onclick="setTheme('dark')">Dark</button>
<button onclick="setTheme('neon')">Neon</button>
<button onclick="setTheme('gold')">Gold</button>
</div>

<div class="controls">
<b>–§–æ–Ω:</b>
<button onclick="setBg('space')">üåå</button>
<button onclick="setBg('fire')">üî•</button>
<button onclick="setBg('neon')">üíú</button>
</div>

<div class="slots" id="slots"></div>

<button onclick="spin()">SPIN</button>

<div id="result"></div>
<div class="history" id="history"></div>
<small>‚≠ê Scatter = FS | üß≤ Wild | $ = FS –±–æ–Ω—É—Å | üíé JACKPOT</small>
</div>

<script>
let balance=50000, freeSpins=0, totalBets=0, totalWins=0, history=[];
const TARGET_RTP=0.9;

const symbols=[
 {s:'üçí', pay:5},
 {s:'üçã', pay:4},
 {s:'üçâ', pay:4},
 {s:'7Ô∏è‚É£', pay:20},
 {s:'‚≠ê', scatter:true},
 {s:'üß≤', wild:true},
 {s:'$', fs:true},
 {s:'üíé', pay:100}
];

const linesArr=[
 [[0,0],[0,1],[0,2],[0,3],[0,4]],
 [[1,0],[1,1],[1,2],[1,3],[1,4]],
 [[2,0],[2,1],[2,2],[2,3],[2,4]],
 [[0,0],[1,1],[2,2],[1,3],[0,4]],
 [[2,0],[1,1],[0,2],[1,3],[2,4]]
];

const slotsEl=document.getElementById('slots');
const grid=[];
for(let r=0;r<3;r++){
 grid[r]=[];
 for(let c=0;c<5;c++){
  const d=document.createElement('div');
  d.className='slot';
  d.textContent='‚ùî';
  slotsEl.appendChild(d);
  grid[r][c]=d;
 }
}

const balanceEl=document.getElementById('balance');
const fsEl=document.getElementById('fs');
const historyEl=document.getElementById('history');
const resultEl=document.getElementById('result');

function setTheme(t){
 const r=document.documentElement;
 if(t==='dark'){
  r.style.setProperty('--slot-bg','linear-gradient(145deg,#555,#222)');
  r.style.setProperty('--btn-bg','linear-gradient(145deg,#e74c3c,#c0392b)');
 }
 if(t==='neon'){
  r.style.setProperty('--slot-bg','linear-gradient(145deg,#0ff,#00f)');
  r.style.setProperty('--btn-bg','linear-gradient(145deg,#f0f,#0ff)');
 }
 if(t==='gold'){
  r.style.setProperty('--slot-bg','linear-gradient(145deg,#ffd700,#b8860b)');
  r.style.setProperty('--btn-bg','linear-gradient(145deg,#ffd700,#ff8c00)');
 }
}

function setBg(b){
 if(b==='space') document.body.style.background='radial-gradient(circle,#111,#000)';
 if(b==='fire')  document.body.style.background='radial-gradient(circle,#ff4500,#000)';
 if(b==='neon')  document.body.style.background='radial-gradient(circle,#8000ff,#000)';
}

// –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π RNG
function randSymbol(reelIndex){
 const rtpCurrent = totalBets ? totalWins/totalBets : 0;
 let allowWin = Math.random()<0.2 && rtpCurrent<TARGET_RTP; // —Ä–µ–¥–∫–∏–π —à–∞–Ω—Å –≤—ã–∏–≥—Ä–∞—Ç—å
 let pool=[];
 symbols.forEach(s=>{
   let weight=1;
   if(s.s==='üíé') weight = allowWin?1:0.02;
   if(s.s==='7Ô∏è‚É£') weight = allowWin?1:0.05;
   if(s.s==='üçí'||s.s==='üçã'||s.s==='üçâ') weight = allowWin?1:0.2;
   if(s.s==='üß≤') weight=0.05;
   if(s.s==='‚≠ê') weight=0.05;
   if(s.s==='$') weight=0.02;
   for(let i=0;i<weight*100;i++) pool.push(s);
 });
 return pool[Math.floor(Math.random()*pool.length)];
}

function updateUI(){
 balanceEl.textContent=balance;
 fsEl.textContent=freeSpins;
 const rtp=totalBets?Math.round(totalWins/totalBets*100):0;
 historyEl.innerHTML=`–ò—Å—Ç–æ—Ä–∏—è: ${history.join(', ')}<br>RTP: ${rtp}%`;
}

function clearLines(){
 document.querySelectorAll('.line').forEach(l=>l.remove());
 document.querySelectorAll('.slot').forEach(s=>s.classList.remove('win'));
}

function checkLine(line,bet){
 let base=null,count=0,cells=[];
 for(let i=0;i<line.length;i++){
   const cell=grid[line[i][0]][line[i][1]];
   const sym=cell.textContent;
   if(sym==='‚≠ê'||sym==='$') break;
   if(!base&&sym!=='üß≤') base=sym;
   if(sym===base||sym==='üß≤'){
     count++; cells.push(cell);
   } else break;
 }
 if(!base) return 0;
 cells.forEach(c=>c.classList.add('win'));
 drawZigzagLine(cells);
 if(base==='üíé' && count>=5) return bet*100*count;
 if(base==='7Ô∏è‚É£' && count>=4) return bet*20*count;
 if(count>=4) return bet*symbols.find(s=>s.s===base).pay*count;
 return 0;
}

function drawZigzagLine(cells){
 for(let i=0;i<cells.length-1;i++){
  const start=cells[i].getBoundingClientRect();
  const end=cells[i+1].getBoundingClientRect();
  const line=document.createElement('div');
  line.className='line';
  const container=slotsEl.getBoundingClientRect();
  const x1=start.left-container.left + start.width/2;
  const y1=start.top-container.top + start.height/2;
  const x2=end.left-container.left + end.width/2;
  const y2=end.top-container.top + end.height/2;
  const length=Math.hypot(x2-x1, y2-y1);
  line.style.width=length+'px';
  line.style.transform=`rotate(${Math.atan2(y2-y1,x2-x1)}rad)`;
  line.style.left=x1+'px';
  line.style.top=y1+'px';
  slotsEl.appendChild(line);
  setTimeout(()=>line.remove(),1500);
 }
}

function showBigWin(amount,symbol){
 let text='';
 if(symbol==='üíé') text='üíé JACKPOT! '+amount;
 else if(symbol==='7Ô∏è‚É£') text='üéâ BIG WIN! '+amount;
 else if(amount>=50) text='üéâ WIN! '+amount;
 if(text){
   const div=document.createElement('div');
   div.className='bigWin';
   div.textContent=text;
   document.body.appendChild(div);
   setTimeout(()=>div.remove(),1200);
 }
}

function spin(auto=false){
 clearLines();
 const bet=+document.getElementById('bet').value;
 let lines = +document.getElementById('lines').value;
 lines = Math.min(lines, linesArr.length);
 const cost=bet*lines;

 if(freeSpins>0) freeSpins--;
 else if(!auto){
   if(balance<cost){resultEl.textContent='‚ùå –ù–µ—Ç –¥–µ–Ω–µ–≥'; return;}
   balance-=cost; totalBets+=cost;
 }

 let col=0;
 function spinReel(){
   if(col>=5){finish(); return;}
   for(let r=0;r<3;r++) grid[r][col].classList.add('spin');
   setTimeout(()=>{
     for(let r=0;r<3;r++){
       grid[r][col].textContent = randSymbol(col).s;
       grid[r][col].classList.remove('spin');
     }
     col++; spinReel();
   },250);
 }
 spinReel();

 function finish(){
   let win=0, scat=0, dol=0, winSymbol='';
   for(let i=0;i<lines;i++){
     const lineWin = checkLine(linesArr[i],bet);
     if(lineWin>0){
       win+=lineWin;
       const base=grid[linesArr[i][0][0]][linesArr[i][0][1]].textContent;
       if(base==='7Ô∏è‚É£'||base==='üíé') winSymbol=base;
     }
   }
   grid.flat().forEach(c=>{ if(c.textContent==='‚≠ê') scat++; if(c.textContent==='$') dol++; });
   if(scat>=3) freeSpins+=scat===3?5:scat===4?10:15;
   if(dol>=3) freeSpins+=5;

   if(win>0){
     balance+=win; totalWins+=win;
     history.unshift(win);
     resultEl.textContent=`üéâ –í—ã–∏–≥—Ä—ã—à ${win}`;
     showBigWin(win,winSymbol);
   } else {
     history.unshift(0);
     resultEl.textContent='üòû –ü—Ä–æ–∏–≥—Ä—ã—à';
   }
   history=history.slice(0,20);
   updateUI();
   if(freeSpins>0) setTimeout(()=>spin(true),900);
 }
}
updateUI();
</script>
</body>
</html>
















































































































































































































































































































































































































































































































































