<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slot + Book of Ra Pro</title>
<style>
body { background:#222; color:white; font-family:Arial; text-align:center; margin:0; padding:10px; }
.container { max-width:520px; margin:auto; background:#333; padding:15px; border-radius:15px; }
.slots { display:grid; gap:8px; margin:15px 0; grid-template-columns: repeat(5, 1fr); }
.slot { background:#444; border-radius:10px; font-size:26px; display:flex; align-items:center; justify-content:center; transition:.15s; position:relative; }
.spin { transform:scale(1.1); }
.win { box-shadow:0 0 10px gold; border:2px solid gold; animation:flash 0.5s infinite alternate; }
@keyframes flash { 0%{box-shadow:0 0 10px gold;} 100%{box-shadow:0 0 20px gold;} }
.mult { color:#ffd700; font-weight:bold; }
.controls { display:flex; flex-wrap:wrap; gap:8px; justify-content:center; margin-bottom:10px;}
button,input,select { padding:10px; font-size:16px; border-radius:8px; border:none; }
button { background:#ff6347; color:#fff; cursor:pointer; }
button:hover { background:#ff4500; }
.won { color:lime; font-weight:bold; }
.lost { color:red; font-weight:bold; }
@media(max-width:480px){ .slot{ font-size:22px; } }
</style>
</head>
<body>

<h2>üé∞ –ò–≥—Ä–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞: Slot + Book of Ra</h2>
<div class="container">
    <div>–ë–∞–ª–∞–Ω—Å: <b><span id="balance">15000</span></b></div>

    <!-- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä -->
    <div class="controls">
        <button onclick="switchGame('slot')">Slot 5x3</button>
        <button onclick="switchGame('book')">Book of Ra 3x3</button>
    </div>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–æ–π –∏ –ª–∏–Ω–∏—è–º–∏ -->
    <div class="controls">
        –°—Ç–∞–≤–∫–∞: <input type="number" id="bet" value="10" min="1">
        –õ–∏–Ω–∏–∏: <select id="lines">
            <option value="1">1 –ª–∏–Ω–∏—è</option>
            <option value="3">3 –ª–∏–Ω–∏–∏</option>
            <option value="5">5 –ª–∏–Ω–∏–π</option>
        </select>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ —Å–ø–∏–Ω–∞ -->
    <div class="controls">
        <button onclick="spin()">SPIN</button>
        <button onclick="toggleAuto()" id="autoBtn">AUTOSPIN</button>
    </div>

    <div id="result" style="margin-top:10px;font-size:18px;"></div>

    <!-- –ò–≥—Ä–æ–≤—ã–µ –ø–æ–ª—è -->
    <div id="slot-game" style="display:block;">
        <div class="slots" id="slots"></div>
    </div>
    <div id="book-game" style="display:none;">
        <div class="slots" id="bookSlots"></div>
    </div>
</div>

<script>
// ====== –û–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ======
let balance = 15000;
let auto=false, autoInt;
let streakMultiplier=1;
const balanceEl = document.getElementById('balance');
const resultEl = document.getElementById('result');
let currentGame = 'slot'; // slot –∏–ª–∏ book

// ====== –°–º–µ–Ω–∞ –∏–≥—Ä—ã ======
function switchGame(game){
    currentGame = game;
    document.getElementById('slot-game').style.display = (game==='slot')?'block':'none';
    document.getElementById('book-game').style.display = (game==='book')?'block':'none';
    clearResult();
}
function clearResult(){ resultEl.textContent=''; }

// ====== –ö–æ–Ω—Ñ–∏–≥ –∏–≥—Ä ======
const gamesConfig = {
    slot: {rows:3,cols:5,base:['üçí','üçã','üçä','üçâ','üçÄ'], jackpots:['üíé','‚≠ê'], secret:['üé©'], el:'slots'},
    book: {rows:3,cols:3,base:['ü™ô','üí∞','‚≠ê'], jackpots:['üìñ'], secret:['üé©'], el:'bookSlots'}
};
let grid=[], matrix=[];

// ====== –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∫–∏ ======
function createGrid(game){
    const cfg = gamesConfig[game];
    const container = document.getElementById(cfg.el);
    container.innerHTML=''; grid=[];
    container.style.gridTemplateColumns = `repeat(${cfg.cols}, 1fr)`; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
    for(let r=0;r<cfg.rows;r++){
        grid[r]=[];
        for(let c=0;c<cfg.cols;c++){
            const cell = document.createElement('div');
            cell.className='slot';
            cell.textContent='‚ùî';
            container.appendChild(cell);
            grid[r][c]=cell;
        }
    }
}
createGrid('slot'); createGrid('book');

// ====== –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤ ======
function generateSymbols(game,lines){
    const cfg = gamesConfig[game];
    matrix = Array(cfg.rows).fill(0).map(()=>Array(cfg.cols).fill(0));
    for(let r=0;r<cfg.rows;r++){
        for(let c=0;c<cfg.cols;c++){
            let rand = Math.random();
            if(rand<0.05) matrix[r][c]={t:cfg.jackpots[Math.floor(Math.random()*cfg.jackpots.length)],v:1};
            else if(rand<0.1) matrix[r][c]={t:cfg.secret[Math.floor(Math.random()*cfg.secret.length)],v:1};
            else matrix[r][c]={t:cfg.base[Math.floor(Math.random()*cfg.base.length)],v:1};
        }
    }

    // –¥–µ–ª–∞–µ–º —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –ª–∏–Ω–∏—é –≤—ã–∏–≥—Ä—ã—à–Ω–æ–π
    const paylines = [];
    for(let r=0;r<cfg.rows;r++) paylines.push(Array(cfg.cols).fill(0).map((_,i)=>[r,i]));
    const activeLines = Math.min(lines, payLinesLength(cfg));
    const winLine = paylines[Math.floor(Math.random()*activeLines)];
    const symbol = cfg.base[Math.floor(Math.random()*cfg.base.length)];
    for(let [r,c] of winLine){ if(Math.random()<0.6) matrix[r][c].t = symbol; }

    // –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã
    const multCount = Math.floor(Math.random()*3);
    let positions=[]; for(let r=0;r<cfg.rows;r++) for(let c=0;c<cfg.cols;c++) positions.push([r,c]);
    positions.sort(()=>Math.random()-0.5);
    const multPos = positions.slice(0,multCount);
    for(let [r,c] of multPos){ matrix[r][c].v = 1+Math.floor(Math.random()*5); } // x1-x5
}
function payLinesLength(cfg){ return cfg.rows; }

// ====== SPIN ======
function spin(){
    const bet = +document.getElementById('bet').value;
    const lines = +document.getElementById('lines').value;
    const total = bet*lines;
    if(total>balance){ resultEl.textContent='‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤'; return; }
    balance -= total; balanceEl.textContent=balance; resultEl.textContent=''; clearWin();
    const cfg = gamesConfig[currentGame];
    let step=0;
    const anim = setInterval(()=>{
        generateSymbols(currentGame,lines);
        for(let r=0;r<cfg.rows;r++){
            for(let c=0;c<cfg.cols;c++){
                const s = matrix[r][c];
                grid[r][c].innerHTML = s.v>1 ? `<span class="mult">x${s.v}</span>` : s.t;
                grid[r][c].classList.add('spin');
            }
        }
        if(++step>5){ clearInterval(anim); clearWin(); calcWin(bet,lines,cfg); }
    },100);
}
function clearWin(){ grid.flat().forEach(c=>c.classList.remove('win','spin')); }

// ====== –í—ã–∏–≥—Ä—ã—à ======
function calcWin(bet,lines,cfg){
    let win=0;
    for(let r=0;r<cfg.rows;r++){
        let symbol=null,count=0,mult=1;
        for(let c=0;c<cfg.cols;c++){
            const s = matrix[r][c];
            if(s.v>1){ mult*=s.v; grid[r][c].classList.add('win'); continue; }
            if(!symbol){ symbol=s.t; count=1; grid[r][c].classList.add('win'); }
            else if(s.t===symbol){ count++; grid[r][c].classList.add('win'); }
        }
        if(count>=2) win += bet*count*mult*streakMultiplier;
    }
    if(win>0) streakMultiplier+=0.1; else streakMultiplier=1;
    balance += win; balanceEl.textContent=balance;
    resultEl.innerHTML = win ? `<span class="won">üéâ –í—ã–∏–≥—Ä—ã—à: ${win}</span>` : `<span class="lost">üòû –ü—Ä–æ–∏–≥—Ä—ã—à</span>`;
}

// ====== AUTOSPIN ======
function toggleAuto(){
    auto=!auto;
    document.getElementById('autoBtn').textContent=auto?'STOP':'AUTOSPIN';
    if(auto){ autoInt=setInterval(()=>{ if(balance>0) spin(); else toggleAuto(); },1200); }
    else clearInterval(autoInt);
}
</script>

</body>
</html>































































































































