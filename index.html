<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ë–∏—Ç–∫–æ–∏–Ω –ö–ª–∏–∫–µ—Ä</title>
<style>
body { font-family: Arial, sans-serif; background: #111; color: #eee; text-align: center; padding: 20px; }
h1 { color: gold; }
#balance, #multiplier, #eventMsg { font-size: 20px; margin: 10px 0; }
button { padding: 10px 20px; font-size: 16px; margin: 5px; cursor: pointer; border-radius: 8px; border: none; background: gold; color: black; }
#upgrades { margin-top: 20px; }
.upgrade { margin-bottom: 10px; }
.popup { position: absolute; color: lime; font-weight: bold; animation: floatUp 1s forwards; pointer-events: none; }
@keyframes floatUp { 0% { opacity:1; transform: translateY(0);} 100% {opacity:0; transform: translateY(-30px);} }
canvas { background: #222; border: 1px solid #555; margin-top: 20px; }
</style>
</head>
<body>

<h1>‚Çø –ë–∏—Ç–∫–æ–∏–Ω –ö–ª–∏–∫–µ—Ä</h1>
<div id="balance">üí∞ BTC: 0</div>
<div id="multiplier">–ú–Ω–æ–∂–∏—Ç–µ–ª—å: √ó1</div>
<div id="eventMsg"></div>
<button id="mineBtn">–ú–∞–π–Ω–∏—Ç—å BTC</button>

<div id="upgrades">
    <h2>–ê–ø–≥—Ä–µ–π–¥—ã</h2>
    <div class="upgrade">
        <button id="upgradeMineBtn">–£–ª—É—á—à–∏—Ç—å –º–∞–π–Ω–∏–Ω–≥ (0.001 BTC)</button>
        <span id="upgradeMineLvl">–£—Ä–æ–≤–µ–Ω—å: 0</span>
    </div>
    <div class="upgrade">
        <button id="autoMineBtn">–ö—É–ø–∏—Ç—å –∞–≤—Ç–æ–ø—É–ª (0.005 BTC)</button>
        <span id="autoMineLvl">–£—Ä–æ–≤–µ–Ω—å: 0</span>
    </div>
    <div class="upgrade">
        <button id="bonusBtn">√ó2 –¥–æ—Ö–æ–¥–∞ (0.01 BTC)</button>
        <span id="bonusTimer">–í—Ä–µ–º—è: 0</span>
    </div>
</div>

<div id="achievements"><h3>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</h3><ul id="achList"></ul></div>
<canvas id="chart" width="300" height="150"></canvas>

<script>
// --- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ---
let balance = 0;
let totalMined = 0;
let baseMine = 0.0001;
let mineMultiplier = 1;
let bonusMultiplier = 1;

let upgrades = {
    mine: { level: 0, baseCost: 0.001 },
    automine: { level: 0, baseCost: 0.005, value: 0.0001 },
    bonus: { active: false, timer: 0, cost: 0.01, duration: 30 }
};

let achievements = [
    { name: "0.01 BTC –¥–æ–±—ã—Ç–æ", condition: () => balance >= 0.01, unlocked: false },
    { name: "0.1 BTC –¥–æ–±—ã—Ç–æ", condition: () => balance >= 0.1, unlocked: false },
    { name: "100 –∫–ª–∏–∫–æ–≤", condition: () => totalMined >= 0.01, unlocked: false }
];

let chartData = [];
const eventMsgEl = document.getElementById("eventMsg");

// --- DOM —ç–ª–µ–º–µ–Ω—Ç—ã ---
const balanceEl = document.getElementById("balance");
const multiplierEl = document.getElementById("multiplier");
const mineBtn = document.getElementById("mineBtn");
const upgradeMineBtn = document.getElementById("upgradeMineBtn");
const upgradeMineLvl = document.getElementById("upgradeMineLvl");
const autoMineBtn = document.getElementById("autoMineBtn");
const autoMineLvl = document.getElementById("autoMineLvl");
const bonusBtn = document.getElementById("bonusBtn");
const bonusTimerEl = document.getElementById("bonusTimer");
const achListEl = document.getElementById("achList");
const chart = document.getElementById("chart");
const ctx = chart.getContext("2d");

// --- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ ---
function updateUI() {
    balanceEl.textContent = `üí∞ BTC: ${balance.toFixed(4)}`;
    multiplierEl.textContent = `–ú–Ω–æ–∂–∏—Ç–µ–ª—å: √ó${(mineMultiplier * bonusMultiplier).toFixed(1)}`;
    upgradeMineLvl.textContent = `–£—Ä–æ–≤–µ–Ω—å: ${upgrades.mine.level}`;
    autoMineLvl.textContent = `–£—Ä–æ–≤–µ–Ω—å: ${upgrades.automine.level}`;
    upgradeMineBtn.textContent = `–£–ª—É—á—à–∏—Ç—å –º–∞–π–Ω–∏–Ω–≥ (${(upgrades.mine.baseCost * Math.pow(1.15, upgrades.mine.level)).toFixed(4)} BTC)`;
    autoMineBtn.textContent = `–ö—É–ø–∏—Ç—å –∞–≤—Ç–æ–ø—É–ª (${(upgrades.automine.baseCost * Math.pow(1.15, upgrades.automine.level)).toFixed(4)} BTC)`;
    bonusBtn.textContent = upgrades.bonus.active ? `√ó2 –∞–∫—Ç–∏–≤–µ–Ω!` : `√ó2 –¥–æ—Ö–æ–¥–∞ (${upgrades.bonus.cost} BTC)`;
    bonusTimerEl.textContent = `–í—Ä–µ–º—è: ${upgrades.bonus.timer}`;
}

// --- –ú–∞–π–Ω–∏—Ç—å BTC ---
mineBtn.addEventListener("click", () => {
    let gain = baseMine * mineMultiplier * bonusMultiplier;
    balance += gain;
    totalMined += gain;

    const popup = document.createElement("div");
    popup.className = "popup";
    popup.style.left = (mineBtn.offsetLeft + Math.random() * 50) + "px";
    popup.style.top = (mineBtn.offsetTop - 20) + "px";
    popup.textContent = `+${gain.toFixed(4)} BTC`;
    document.body.appendChild(popup);
    setTimeout(() => popup.remove(), 1000);

    checkAchievements();
    updateUI();
});

// --- –£–ª—É—á—à–∏—Ç—å –º–∞–π–Ω–∏–Ω–≥ ---
upgradeMineBtn.addEventListener("click", () => {
    let cost = upgrades.mine.baseCost * Math.pow(1.15, upgrades.mine.level);
    if(balance >= cost){
        balance -= cost;
        upgrades.mine.level++;
        mineMultiplier += 0.1;
        updateUI();
    }
});

// --- –ê–≤—Ç–æ–ø—É–ª ---
autoMineBtn.addEventListener("click", () => {
    let cost = upgrades.automine.baseCost * Math.pow(1.15, upgrades.automine.level);
    if(balance >= cost){
        balance -= cost;
        upgrades.automine.level++;
        updateUI();
    }
});

// --- –ë–æ–Ω—É—Å √ó2 ---
bonusBtn.addEventListener("click", () => {
    if(!upgrades.bonus.active && balance >= upgrades.bonus.cost){
        balance -= upgrades.bonus.cost;
        upgrades.bonus.active = true;
        upgrades.bonus.timer = upgrades.bonus.duration;
        bonusMultiplier = 2;
    }
});

// --- –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ + –±–æ–Ω—É—Å —Ç–∞–π–º–µ—Ä + —Å–æ–±—ã—Ç–∏—è ---
setInterval(() => {
    balance += upgrades.automine.level * upgrades.automine.value * bonusMultiplier;

    if(upgrades.bonus.active){
        upgrades.bonus.timer--;
        if(upgrades.bonus.timer <= 0){
            upgrades.bonus.active = false;
            bonusMultiplier = 1;
            upgrades.bonus.timer = 0;
        }
    }

    if(Math.random() < 0.03){
        triggerRandomEvent();
    }

    chartData.push({ btc: balance, mined: totalMined });
    if(chartData.length > 30) chartData.shift();

    drawChart();
    updateUI();
}, 1000);

// --- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è ---
function checkAchievements() {
    achievements.forEach(a => {
        if(!a.unlocked && a.condition()){
            a.unlocked = true;
            const li = document.createElement("li");
            li.textContent = a.name;
            achListEl.appendChild(li);
            showEventMessage(`üéâ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: ${a.name}`);
        }
    });
}

// --- –°–æ–±—ã—Ç–∏—è ---
function triggerRandomEvent() {
    const events = [
        { text: "+0.001 BTC!", effect: () => balance += 0.001 },
        { text: "√ó2 –¥–æ—Ö–æ–¥–∞ 15 —Å–µ–∫!", effect: () => { upgrades.bonus.active = true; upgrades.bonus.timer = 15; bonusMultiplier = 2; } },
        { text: "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∞–≤—Ç–æ–ø—É–ª!", effect: () => upgrades.automine.level++ }
    ];
    const e = events[Math.floor(Math.random()*events.length)];
    e.effect();
    showEventMessage(`‚ö° –°–æ–±—ã—Ç–∏–µ: ${e.text}`);
}

// --- –°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è ---
function showEventMessage(msg){
    eventMsgEl.textContent = msg;
    setTimeout(() => { eventMsgEl.textContent = ""; }, 5000);
}

// --- –ì—Ä–∞—Ñ–∏–∫ ---
function drawChart() {
    ctx.clearRect(0,0,chart.width, chart.height);
    // BTC
    ctx.strokeStyle = "gold";
    ctx.beginPath();
    chartData.forEach((d,i) => {
        let x = i * (chart.width / chartData.length);
        let y = chart.height - (d.btc / (Math.max(...chartData.map(c=>c.btc),0.0001) * 1.1) * chart.height);
        if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
    });
    ctx.stroke();
    // –í—Å–µ–≥–æ –¥–æ–±—ã—Ç–æ
    ctx.strokeStyle = "lime";
    ctx.beginPath();
    chartData.forEach((d,i) => {
        let x = i * (chart.width / chartData.length);
        let y = chart.height - (d.mined / (Math.max(...chartData.map(c=>c.mined),0.0001) * 1.1) * chart.height);
        if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
    });
    ctx.stroke();
}

// --- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ ---
function saveGame() {
    localStorage.setItem("balance", balance);
    localStorage.setItem("totalMined", totalMined);
    localStorage.setItem("upgrades", JSON.stringify(upgrades));
    localStorage.setItem("achievements", JSON.stringify(achievements));
}

function loadGame() {
    if(localStorage.getItem("balance")) balance = parseFloat(localStorage.getItem("balance"));
    if(localStorage.getItem("totalMined")) totalMined = parseFloat(localStorage.getItem("totalMined"));
    if(localStorage.getItem("upgrades")) upgrades = JSON.parse(localStorage.getItem("upgrades"));
    if(localStorage.getItem("achievements")) achievements = JSON.parse(localStorage.getItem("achievements"));
    updateUI();
}

window.addEventListener("beforeunload", saveGame);
loadGame();
</script>

</body>
</html>




















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































