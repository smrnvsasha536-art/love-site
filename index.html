<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slot + Book of Ra</title>
<style>
body { background:#222; color:white; font-family:Arial; text-align:center; margin:0; padding:10px; }
.container { max-width:520px; margin:auto; background:#333; padding:15px; border-radius:15px; }
.slots, #bor-grid { display:grid; gap:8px; margin:15px 0; }
.slots { grid-template-columns:repeat(5,1fr); grid-template-rows:repeat(3,80px); }
#bor-grid { grid-template-columns:repeat(3,1fr); }
.slot, .bor-cell { background:#444; border-radius:10px; font-size:26px; display:flex; align-items:center; justify-content:center; transition:.15s; position:relative; cursor:pointer; }
.spin { transform:scale(1.1); }
.win { box-shadow:0 0 10px gold; border:2px solid gold; animation:flash 0.5s infinite alternate; }
@keyframes flash { 0%{box-shadow:0 0 10px gold;} 100%{box-shadow:0 0 20px gold;} }
.mult { color:#ffd700; font-weight:bold; }
.controls { display:flex; flex-wrap:wrap; gap:8px; justify-content:center; }
button,input,select { padding:10px; font-size:16px; border-radius:8px; border:none; }
button { background:#ff6347; color:#fff; cursor:pointer; }
button:hover { background:#ff4500; }
.won { color:lime; font-weight:bold; }
.lost { color:red; font-weight:bold; }
.bonus { position:fixed; inset:0; background:rgba(0,0,0,0.85); display:none; align-items:center; justify-content:center; }
.bonus-box { background:#333; padding:20px; border-radius:15px; width:320px; text-align:center; }
.red { background:#c0392b; }
.black { background:#000; }
@media(max-width:480px){ .slot, .bor-cell{ font-size:22px; } }
</style>
</head>
<body>

<h2>üé∞ –ò–≥—Ä–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</h2>
<div class="container">
    <div>–ë–∞–ª–∞–Ω—Å: <b><span id="balance">15000</span></b></div>

    <!-- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä -->
    <div class="controls">
        <button onclick="switchGame('slot')">Slot 5x3</button>
        <button onclick="switchGame('book')">Book of Ra</button>
    </div>

    <!-- Slot 5x3 -->
    <div id="slot-game">
        <div class="slots" id="slots"></div>
        <div class="controls">
            <input type="number" id="bet" value="10" min="1">
            <select id="lines">
                <option value="1">1 –ª–∏–Ω–∏—è</option>
                <option value="3">3 –ª–∏–Ω–∏–∏</option>
                <option value="5">5 –ª–∏–Ω–∏–π</option>
            </select>
        </div>
        <div class="controls">
            <button onclick="spin()">SPIN</button>
            <button onclick="toggleAuto()" id="autoBtn">AUTOSPIN</button>
        </div>
    </div>

    <!-- Book of Ra -->
    <div id="book-game" style="display:none;">
        <div class="controls">
            <button onclick="openBookOfRa()">–ù–∞—á–∞—Ç—å Book of Ra</button>
        </div>
        <div class="bonus" id="bookOfRa">
            <div class="bonus-box">
                <h3>üìñ Book of Ra</h3>
                <p>–í—ã–±–µ—Ä–∏ —è—á–µ–π–∫–∏</p>
                <div id="bor-grid"></div>
                <div id="bor-result" style="margin-top:10px;"></div>
                <button onclick="closeBookOfRa()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="result" style="margin-top:10px;font-size:18px;"></div>
</div>

<script>
// === –û–±—â–∏–π –±–∞–ª–∞–Ω—Å ===
let balance = 15000;
const balanceEl = document.getElementById('balance');
const resultEl = document.getElementById('result');

// === –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä ===
function switchGame(game){
    document.getElementById('slot-game').style.display = (game==='slot')?'block':'none';
    document.getElementById('book-game').style.display = (game==='book')?'block':'none';
    clearResult();
}
function clearResult(){ resultEl.textContent=''; }

// =================== SLOT 5x3 ===================
let auto=false, autoInt;
let bonusAmount=0;
let streakMultiplier=1;

const baseSymbols = ['üçí','üçã','üçä','üçâ','üçÄ'];
const jackpotSymbols = ['üíé','‚≠ê'];
const secretSymbols = ['üé©'];
const multipliers = [{t:'x2',v:2},{t:'x5',v:5},{t:'x10',v:10},{t:'x50',v:50}];
const paylines = [
    [[1,0],[1,1],[1,2],[1,3],[1,4]],
    [[0,0],[0,1],[0,2],[0,3],[0,4]],
    [[2,0],[2,1],[2,2],[2,3],[2,4]],
    [[0,0],[1,1],[2,2],[1,3],[0,4]],
    [[2,0],[1,1],[0,2],[1,3],[2,4]]
];

const slotsEl = document.getElementById('slots');
let grid=[], matrix=[];
for(let r=0;r<3;r++){
    grid[r]=[];
    for(let c=0;c<5;c++){
        const d=document.createElement('div');
        d.className='slot';
        d.textContent='‚ùî';
        slotsEl.appendChild(d);
        grid[r][c]=d;
    }
}

function clearWin(){
    grid.flat().forEach(s=>s.classList.remove('win','spin'));
}

function generateSymbols(lines){
    matrix = [[],[],[]];
    for(let r=0;r<3;r++){
        for(let c=0;c<5;c++){
            let rand = Math.random();
            if(rand<0.03) matrix[r][c]={t:jackpotSymbols[Math.floor(Math.random()*jackpotSymbols.length)],v:1};
            else if(rand<0.06) matrix[r][c]={t:secretSymbols[Math.floor(Math.random()*secretSymbols.length)],v:1};
            else matrix[r][c]={t:baseSymbols[Math.floor(Math.random()*baseSymbols.length)],v:1};
        }
    }
    const winLine = paylines[Math.floor(Math.random()*lines)];
    const symbol = baseSymbols[Math.floor(Math.random()*baseSymbols.length)];
    for(let i=0;i<5;i++){ if(Math.random()<0.6) matrix[winLine[i][0]][winLine[i][1]].t = symbol; }
    const multCount = Math.floor(Math.random()*4);
    let positions=[];
    for(let r=0;r<3;r++){ for(let c=0;c<5;c++) positions.push([r,c]); }
    positions.sort(()=>Math.random()-0.5);
    const multPos = positions.slice(0,multCount);
    for(let [r,c] of multPos){ matrix[r][c].v = multipliers[Math.floor(Math.random()*multipliers.length)].v; }
}

function spin(){
    const bet = +document.getElementById('bet').value;
    const lines = +document.getElementById('lines').value;
    const total = bet*lines;
    if(total>balance){ resultEl.textContent='‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤'; return; }

    balance -= total; balanceEl.textContent=balance;
    resultEl.textContent=''; clearWin();
    let step=0;
    const anim = setInterval(()=>{
        generateSymbols(lines);
        for(let r=0;r<3;r++){
            for(let c=0;c<5;c++){
                const s=matrix[r][c];
                grid[r][c].innerHTML = s.v>1 ? `<span class="mult">x${s.v}</span>` : s.t;
                grid[r][c].classList.add('spin');
            }
        }
        if(++step>6){ clearInterval(anim); clearWin(); bonusAmount = calcWin(bet,lines); }
    },100);
}

function calcWin(bet,lines){
    let win=0;
    for(let i=0;i<lines;i++){
        const line = paylines[i];
        let symbol=null,count=0,mult=1;
        for(let p of line){
            const s = matrix[p[0]][p[1]];
            if(s.v>1){ mult*=s.v; grid[p[0]][p[1]].classList.add('win'); continue; }
            if(!symbol){ symbol=s.t; count=1; grid[p[0]][p[1]].classList.add('win'); }
            else if(s.t===symbol){ count++; grid[p[0]][p[1]].classList.add('win'); }
        }
        if(count>=3) win += bet*count*mult*streakMultiplier;
    }
    if(win>0) streakMultiplier += 0.1; else streakMultiplier=1;
    balance += win; balanceEl.textContent=balance;
    resultEl.innerHTML = win ? `<span class="won">üéâ –í—ã–∏–≥—Ä—ã—à: ${win}</span>` : `<span class="lost">üòû –ü—Ä–æ–∏–≥—Ä—ã—à</span>`;
    return win;
}

function toggleAuto(){
    auto=!auto;
    const btn=document.getElementById('autoBtn');
    btn.textContent=auto?'STOP':'AUTOSPIN';
    if(auto){ autoInt=setInterval(()=>{ if(balance>0) spin(); else toggleAuto(); },1200); }
    else clearInterval(autoInt);
}

// =================== BOOK OF RA ===================
const borEl = document.getElementById('bookOfRa');
const borGrid = document.getElementById('bor-grid');
const borResult = document.getElementById('bor-result');
let borWin=0;
let borBonusActive=false;
let borBonusSpins=0;
const borSymbols = ['üí∞','ü™ô','‚≠ê','üìñ'];

function openBookOfRa(){
    borEl.style.display='flex'; borGrid.innerHTML=''; borResult.innerHTML=''; borWin=0; borBonusActive=false;
    for(let i=0;i<9;i++){
        const cell = document.createElement('div'); cell.className='bor-cell';
        cell.style.height='60px'; cell.onclick = ()=>pickBOR(cell);
        borGrid.appendChild(cell);
    }
}
function pickBOR(cell){
    if(cell.dataset.clicked==='1') return; cell.dataset.clicked='1';
    let sym;
    if(Math.random()<0.1){ sym='üìñ'; borBonusActive=true; borBonusSpins=3; }
    else sym = borSymbols[Math.floor(Math.random()*(borSymbols.length-1))];
    cell.textContent = sym;
    if(sym==='üí∞') borWin+=50;
    if(sym==='ü™ô') borWin+=20;
    if(sym==='‚≠ê') borWin+=100;
}
function closeBookOfRa(){
    balance+=borWin; balanceEl.textContent=balance;
    if(borBonusActive) resultEl.innerHTML = `üìñ Book of Ra –±–æ–Ω—É—Å! +${borWin}, ${borBonusSpins} –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–ø–∏–Ω–æ–≤!`;
    else resultEl.innerHTML = `üìñ Book of Ra –∑–∞–∫–æ–Ω—á–µ–Ω–æ! +${borWin}`;
    borEl.style.display='none'; borWin=0; borBonusActive=false; borBonusSpins=0;
}
</script>
</body>
</html>



























































































































