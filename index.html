<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ù–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è üíñ</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
margin:0;font-family:Montserrat;
min-height:100vh;
background:#ffc0cb;
display:flex;justify-content:center;align-items:center;
color:#333
}

.lock{
position:fixed;inset:0;
background:#000;
display:flex;align-items:center;justify-content:center;
z-index:1000
}
.lock input{
padding:15px;font-size:18px;border-radius:12px;border:none
}

.app{
width:95%;max-width:900px;
background:#fff;border-radius:25px;
padding:20px;box-shadow:0 20px 40px rgba(0,0,0,.25)
}

.menu-btn{
position:fixed;top:15px;left:15px;
font-size:26px;background:none;border:none;cursor:pointer
}

.menu{
position:fixed;top:0;left:-260px;
width:250px;height:100%;
background:#fff;padding:20px;
transition:.3s;z-index:999
}
.menu.open{left:0}
.menu button{width:100%;margin:5px 0;padding:10px}

.header{
text-align:center
}

.counter{margin:10px 0;font-weight:bold}

.gallery{
display:grid;
grid-template-columns:repeat(4,1fr);
gap:10px;
margin-top:15px
}

.photo{
border-radius:12px;
overflow:hidden;
background:#f3f3f3
}
.photo img{
width:100%;
aspect-ratio:1/1;
object-fit:cover;
cursor:pointer
}
.photo textarea{
width:100%;border:none;
padding:5px;font-size:12px;
resize:none
}

.actions{
display:flex;justify-content:space-between;
padding:5px
}
.actions button{
border:none;background:none;
cursor:pointer;font-size:16px
}

.overlay{
position:fixed;inset:0;
background:rgba(0,0,0,.9);
display:flex;align-items:center;justify-content:center;
z-index:2000
}
.overlay img{max-width:90%;max-height:90%}
</style>
</head>

<body>

<div class="lock" id="lock">
<input type="password" placeholder="–ü–∞—Ä–æ–ª—å ‚ù§Ô∏è" onkeydown="checkPass(event)">
</div>

<button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>

<div class="menu" id="menu">
<button onclick="showAll()">üì∏ –í—Å–µ</button>
<button onclick="showFav()">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
<button onclick="askHidden()">üîê –°–∫—Ä—ã—Ç—ã–µ</button>
<button onclick="sortByDate()">üïí –ü–æ –¥–∞—Ç–µ</button>
</div>

<div class="app" id="app" style="display:none">

<div class="header">
<h2>–°–∞—à–∞ ‚ù§Ô∏è –ê–¥—É—à–∫–∞</h2>
<div class="counter" id="counter"></div>
</div>

<input type="file" multiple accept="image/*" onchange="addPhotos(event)">

<div class="gallery" id="gallery"></div>

</div>

<script>
const PASSWORD="love";
const HIDDEN_PASS="secret";

const lock=document.getElementById("lock");
const app=document.getElementById("app");
const gallery=document.getElementById("gallery");
const menu=document.getElementById("menu");

let mode="all";

function checkPass(e){
if(e.key==="Enter" && e.target.value===PASSWORD){
lock.style.display="none";
app.style.display="block";
}
}

function toggleMenu(){menu.classList.toggle("open")}

const start=new Date(2024,7,5);
setInterval(()=>{
const diff=Date.now()-start;
const d=Math.floor(diff/86400000);
counter.innerText=`–ú—ã –≤–º–µ—Å—Ç–µ ${d} –¥–Ω–µ–π ‚ù§Ô∏è`;
},1000);

let photos=JSON.parse(localStorage.photos||"[]");
function save(){localStorage.photos=JSON.stringify(photos)}

function addPhotos(e){
for(let f of e.target.files){
const r=new FileReader();
r.onload=x=>{
photos.push({
src:x.target.result,
text:"",
fav:false,
hidden:false,
date:Date.now()
});
save();render();
};
r.readAsDataURL(f);
}
}

function render(){
gallery.innerHTML="";
photos.forEach((p,i)=>{
if(mode==="fav" && !p.fav) return;
if(mode==="hidden" && !p.hidden) return;
if(mode==="all" && p.hidden) return;

const d=document.createElement("div");
d.className="photo";
d.innerHTML=`
<img src="${p.src}" onclick="openImg(${i})">
<textarea placeholder="–ü–æ–¥–ø–∏—Å—å..."
oninput="photos[${i}].text=this.value;save()">${p.text}</textarea>
<div class="actions">
<button onclick="toggleFav(${i})">${p.fav?"‚≠ê":"‚òÜ"}</button>
<button onclick="toggleHidden(${i})">üôà</button>
<button onclick="removePhoto(${i})">‚úñ</button>
</div>`;
gallery.appendChild(d);
});
}

function openImg(i){
const o=document.createElement("div");
o.className="overlay";
o.onclick=()=>o.remove();
o.innerHTML=`<img src="${photos[i].src}">`;
document.body.appendChild(o);
}

function toggleFav(i){photos[i].fav=!photos[i].fav;save();render()}
function toggleHidden(i){photos[i].hidden=!photos[i].hidden;save();render()}
function removePhoto(i){
if(confirm("–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ?")){
photos.splice(i,1);save();render();
}}

function sortByDate(){
photos.sort((a,b)=>b.date-a.date);
save();render();
}

function showFav(){mode="fav";render()}
function showAll(){mode="all";render()}
function askHidden(){
const p=prompt("–ü–∞
















